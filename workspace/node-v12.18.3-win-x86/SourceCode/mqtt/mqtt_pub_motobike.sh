#!/usr/bin/bash
#Test bus 送 google map gps 路徑 至 topic: cs/motobike/output
#需要 node-v11.13.0-win-x64/ 底下的 mqtt executable
i=0
lat=24
lng=121

BUSLNG=("121.51370286941528" "121.51400327682495" "121.51421785354613" "121.51443243026733" "121.51453971862792" "121.51456117630005" "121.51464700698853" "121.51473283767699" "121.51481866836546" "121.5148615837097" "121.51494741439821" "121.51507616043091" "121.51505470275877" "121.51505470275877" "121.51496887207031" "121.51479721069336" "121.51453971862792" "121.5143895149231" "121.51421785354613" "121.51404619216919" "121.51393890380858" "121.5138530731201" "121.51361703872679" "121.51342391967773" "121.5132737159729" "121.51308059692381" "121.51301622390748" "121.51267290115356" "121.51247978210448" "121.51239395141602" "121.51215791702269" "121.51187896728514" "121.51155710220335" "121.5116000175476" "121.51144981384277" "121.51110649108885" "121.51110649108885" "121.51093482971191" "121.51093482971191" "121.51108503341675" "121.51134252548218" "121.51172876358032" "121.51224374771117" "121.51254415512085" "121.51275873184203" "121.5132737159729" "121.51346683502197" "121.51353120803832" "121.51357412338255")
BUSLAT=("25.003619630203737" "25.003619630203737" "25.00369741690872" "25.00371686357727" "25.003619630203737" "25.00342516322579" "25.003230695940015" "25.003036228346414" "25.002841760444987" "25.002491717446702" "25.002258354893765" "25.00198609802178" "25.00179162845812" "25.001558264575433" "25.001363794334594" "25.001169323785927" "25.000935958721218" "25.000702593213294" "25.000508121618097" "25.000274755297553" "25.000080283025177" "25.000002494030042" "24.999808021326764" "24.999652442942512" "24.999341285583085" "24.999224601370152" "24.998952337775723" "24.998796758308046" "24.99864117864338" "24.99836891375624" "24.998680073578004" "24.998816205752266" "24.998971785195316" "24.999107917046384" "24.99928294349046" "24.99941907499681" "24.99957465367652" "24.999885810445026" "25.000138624739215" "25.000508121618097" "25.00081927602266" "25.001149876714134" "25.00151937055187" "25.002063885761057" "25.002452823718674" "25.002783420014545" "25.00317235569425" "25.003327929621374" "25.003464056646013")
MQTT_BROKER_SERVER="broker.emqx.io"

while true
do
	for((i=0; i<${#BUSLAT[@]}; i++))
	do
		lat=${BUSLAT[i]}
		lng=${BUSLNG[i]}
	    ./mqtt pub -t 'csstudiospace/motobike/output' -h ${MQTT_BROKER_SERVER} -m "{\"rescmd\":\"18\",\"ret\":\"OK\",\"value\":{\"N\":\"MotoBike - 1\",\"GPS\":1,\"IP\":\"192.168.6.1\",\"Mac\":\"80:7D:3A:32:8A:AA\",\"Lat\":${lat},\"Lng\":${lng},\"Key\":\"nonono\"}}"
		echo ${lat} ${lng}
		sleep 3
	done
done
